<router-outlet *ngIf="!showForm"></router-outlet>

<div *ngIf="showForm" class="container">
  <div class="form-wrapper">
    <!-- Header -->
    <div class="header">
      <h1 class="title">
        <i class="icon">üöó</i>
        Registro de Veh√≠culos
      </h1>
      <p class="subtitle">Complete el formulario para registrar su veh√≠culo en el evento</p>
    </div>

    <!-- Formulario -->
    <form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()" class="registration-form">
      
      <!-- Secci√≥n de Datos Personales -->
      <div class="form-section">
        <h2 class="section-title">
          <i class="section-icon">üë§</i>
          Datos Personales
        </h2>
        
        <div class="form-grid">
          <!-- Nombre Completo -->
          <div class="form-group">
            <label for="nombreCompleto" class="form-label">Nombre Completo *</label>
            <input
              type="text"
              id="nombreCompleto"
              formControlName="nombreCompleto"
              class="form-input"
              [class.is-invalid]="isSubmitted && f['nombreCompleto'].errors"
              placeholder="Ingrese su nombre completo"
            />
            <div class="error-message" *ngIf="isSubmitted && f['nombreCompleto'].errors">
              <span *ngIf="f['nombreCompleto'].errors['required']">El nombre es requerido</span>
              <span *ngIf="f['nombreCompleto'].errors['minlength']">El nombre debe tener al menos 3 caracteres</span>
            </div>
          </div>

          <!-- Documento de Identificaci√≥n -->
          <div class="form-group">
            <label for="documentoIdentificacion" class="form-label">Documento de Identificaci√≥n *</label>
            <input
              type="text"
              id="documentoIdentificacion"
              formControlName="documentoIdentificacion"
              class="form-input"
              [class.is-invalid]="isSubmitted && f['documentoIdentificacion'].errors"
              placeholder="Ej: 12345678"
            />
            <div class="error-message" *ngIf="isSubmitted && f['documentoIdentificacion'].errors">
              <span *ngIf="f['documentoIdentificacion'].errors['required']">El documento es requerido</span>
              <span *ngIf="f['documentoIdentificacion'].errors['pattern']">Debe contener entre 8 y 12 d√≠gitos</span>
            </div>
          </div>

          <!-- Tel√©fono -->
          <div class="form-group">
            <label for="telefono" class="form-label">N√∫mero de Tel√©fono *</label>
            <input
              type="tel"
              id="telefono"
              formControlName="telefono"
              class="form-input"
              [class.is-invalid]="isSubmitted && f['telefono'].errors"
              placeholder="Ej: 3001234567"
            />
            <div class="error-message" *ngIf="isSubmitted && f['telefono'].errors">
              <span *ngIf="f['telefono'].errors['required']">El tel√©fono es requerido</span>
              <span *ngIf="f['telefono'].errors['pattern']">Debe contener 10 d√≠gitos</span>
            </div>
          </div>

          <!-- Email -->
          <div class="form-group">
            <label for="email" class="form-label">Correo Electr√≥nico *</label>
            <input
              type="email"
              id="email"
              formControlName="email"
              class="form-input"
              [class.is-invalid]="isSubmitted && f['email'].errors"
              placeholder="ejemplo@correo.com"
            />
            <div class="error-message" *ngIf="isSubmitted && f['email'].errors">
              <span *ngIf="f['email'].errors['required']">El email es requerido</span>
              <span *ngIf="f['email'].errors['email']">Debe ser un email v√°lido</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Secci√≥n de Datos del Veh√≠culo -->
      <div class="form-section">
        <h2 class="section-title">
          <i class="section-icon">üöô</i>
          Datos del Veh√≠culo
        </h2>
        
        <div class="form-grid">
          <!-- Tem√°tica -->
          <div class="form-group full-width">
            <label for="tematica" class="form-label">Tem√°tica del Carro Aleg√≥rico *</label>
            <select
              id="tematica"
              formControlName="tematica"
              class="form-input form-select"
              [class.is-invalid]="isSubmitted && f['tematica'].errors"
            >
              <option value="">Seleccione una tem√°tica</option>
              
              <optgroup label="Temas B√≠blicos">
                <option value="La creaci√≥n">La creaci√≥n</option>
                <option value="El jard√≠n del Ed√©n">El jard√≠n del Ed√©n</option>
                <option value="El Arca de No√©">El Arca de No√©</option>
                <option value="Jos√© interpreta los sue√±os del Fara√≥n">Jos√© interpreta los sue√±os del Fara√≥n</option>
                <option value="Mois√©s salvado de las aguas">Mois√©s salvado de las aguas</option>
                <option value="La zarza ardiente">La zarza ardiente</option>
                <option value="Yahv√© env√≠a el man√° en el desierto">Yahv√© env√≠a el man√° en el desierto</option>
                <option value="Los diez mandamientos">Los diez mandamientos</option>
                <option value="Los Israelitas llevan el Arca de la Alianza">Los Israelitas llevan el Arca de la Alianza</option>
                <option value="David y Goliat">David y Goliat</option>
                <option value="El sacrificio del profeta El√≠as">El sacrificio del profeta El√≠as</option>
                <option value="El√≠as da de comer a la viuda de Sarepta">El√≠as da de comer a la viuda de Sarepta</option>
                <option value="El√≠as ora para que venga la lluvia">El√≠as ora para que venga la lluvia</option>
                <option value="Anuncio del nacimiento de Juan el Bautista">Anuncio del nacimiento de Juan el Bautista</option>
                <option value="Los padres (Joaqu√≠n y Ana) de la Virgen Mar√≠a">Los padres (Joaqu√≠n y Ana) de la Virgen Mar√≠a</option>
                <option value="La ni√±a Mar√≠a">La ni√±a Mar√≠a</option>
                <option value="La anunciaci√≥n de la Virgen Mar√≠a">La anunciaci√≥n de la Virgen Mar√≠a</option>
                <option value="El Sue√±o de Jos√©">El Sue√±o de Jos√©</option>
                <option value="La visitaci√≥n">La visitaci√≥n</option>
                <option value="El empadronamiento">El empadronamiento</option>
                <option value="Mar√≠a y Jos√© buscan posada">Mar√≠a y Jos√© buscan posada</option>
                <option value="El nacimiento de Jes√∫s">El nacimiento de Jes√∫s</option>
                <option value="El anuncio del √Ångel a los pastores">El anuncio del √Ångel a los pastores</option>
                <option value="La visita y adoraci√≥n de los pastores al Ni√±o Jes√∫s">La visita y adoraci√≥n de los pastores al Ni√±o Jes√∫s</option>
                <option value="La visita de los reyes magos">La visita de los reyes magos</option>
                <option value="La huida de la sagrada Familia a Egipto">La huida de la sagrada Familia a Egipto</option>
                <option value="El sacrificio de los santos inocentes">El sacrificio de los santos inocentes</option>
                <option value="La profec√≠a de Ana y Sime√≥n">La profec√≠a de Ana y Sime√≥n</option>
                <option value="La presentaci√≥n del Ni√±o en el templo">La presentaci√≥n del Ni√±o en el templo</option>
                <option value="La Sagrada Familia en Nazareth">La Sagrada Familia en Nazareth</option>
                <option value="Jes√∫s entre los doctores de la Ley del templo de Jerusal√©n">Jes√∫s entre los doctores de la Ley del templo de Jerusal√©n</option>
                <option value="Jes√∫s, amigo de los ni√±os">Jes√∫s, amigo de los ni√±os</option>
                <option value="Jes√∫s en el taller de su padre Jos√©">Jes√∫s en el taller de su padre Jos√©</option>
                <option value="Los cuatro evangelistas">Los cuatro evangelistas</option>
              </optgroup>
              
              <optgroup label="Temas Generales">
                <option value="Pasajes b√≠blicos">Pasajes b√≠blicos (especificar)</option>
                <option value="Personajes de la navidad">Personajes de la navidad (especificar)</option>
                <option value="Pesebres vivientes">Pesebres vivientes</option>
                <option value="Grupo folkl√≥rico">Grupo folkl√≥rico (especificar)</option>
                <option value="Grupos art√≠stico navide√±o">Grupos art√≠stico navide√±o (especificar)</option>
                <option value="Otros">Otros (especificar)</option>
              </optgroup>
            </select>
            <div class="error-message" *ngIf="isSubmitted && f['tematica'].errors">
              <span *ngIf="f['tematica'].errors['required']">La tem√°tica es requerida</span>
            </div>
          </div>

          <!-- Campo condicional para detalles de tem√°tica -->
          <div class="form-group full-width" *ngIf="requiereDetalle()">
            <label for="tematicaDetalle" class="form-label">Especifique los detalles *</label>
            <input
              type="text"
              id="tematicaDetalle"
              formControlName="tematicaDetalle"
              class="form-input"
              [class.is-invalid]="isSubmitted && requiereDetalle() && !f['tematicaDetalle'].value"
              placeholder="Describa los detalles de la tem√°tica seleccionada"
            />
            <div class="error-message" *ngIf="isSubmitted && requiereDetalle() && !f['tematicaDetalle'].value">
              <span>Este campo es requerido para la tem√°tica seleccionada</span>
            </div>
          </div>

          <!-- Placa -->
          <div class="form-group">
            <label for="placa" class="form-label">Placa *</label>
            <input
              type="text"
              id="placa"
              formControlName="placa"
              class="form-input"
              [class.is-invalid]="isSubmitted && f['placa'].errors"
              placeholder="Ej: ABC123"
              style="text-transform: uppercase;"
            />
            <div class="error-message" *ngIf="isSubmitted && f['placa'].errors">
              <span *ngIf="f['placa'].errors['required']">La placa es requerida</span>
              <span *ngIf="f['placa'].errors['pattern']">Formato: 3 letras seguidas de 3 n√∫meros (Ej: ABC123)</span>
            </div>
          </div>
        

          <!-- Tipo de Veh√≠culo -->
          <div class="form-group full-width">
            <label for="tipoVehiculo" class="form-label">Tipo de Veh√≠culo *</label>
            <select
              id="tipoVehiculo"
              formControlName="tipoVehiculo"
              class="form-input form-select"
              [class.is-invalid]="isSubmitted && f['tipoVehiculo'].errors"
            >
              <option value="">Seleccione el tipo de veh√≠culo</option>
              <option value="Autom√≥vil (Sed√°n)">Autom√≥vil (Sed√°n)</option>
              <option value="Hatchback">Hatchback</option>
              <option value="SUV">SUV</option>
              <option value="Camioneta">Camioneta</option>
              <option value="Pickup liviana">Pickup liviana</option>
              <option value="Crossover">Crossover</option>
              <option value="Furgoneta peque√±a">Furgoneta peque√±a</option>
              <option value="Plataforma liviana">Plataforma liviana</option>
            </select>
            <div class="error-message" *ngIf="isSubmitted && f['tipoVehiculo'].errors">
              <span *ngIf="f['tipoVehiculo'].errors['required']">El tipo de veh√≠culo es requerido</span>
            </div>
            
            <div class="warning-box">
              <strong>‚ö†Ô∏è Veh√≠culos NO permitidos:</strong>
              <p>Camiones, doble eje, cabezales, tr√°iler, buses, busetas, volquetas o veh√≠culos de carga pesada.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Botones de Acci√≥n -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="resetForm()" [disabled]="isLoading">
          <i class="btn-icon">üîÑ</i>
          Limpiar
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="isLoading">
          <i class="btn-icon" *ngIf="!isLoading">üíæ</i>
          <i class="btn-icon loading-icon" *ngIf="isLoading">‚è≥</i>
          {{ isLoading ? 'Guardando...' : 'Registrar Veh√≠culo' }}
        </button>
      </div>
    </form>
  </div>
</div>
