<div class="admin-container">
	<div class="admin-header">
		<h2>Panel de Administraci√≥n</h2>
		<div class="actions">
			<button class="btn-validacion" (click)="irAValidacion()">Validar C√≥digos QR</button>
			<button (click)="logout()">Cerrar sesi√≥n</button>
		</div>
	</div>

	<div *ngIf="loading">Cargando registros...</div>

	<!-- Buscador -->
	<div *ngIf="!loading" class="search-container">
		<div class="search-box">
			<input 
				type="text" 
				placeholder="Buscar por n√∫mero de c√©dula..." 
				[(ngModel)]="busquedaCedula"
				(input)="filtrarVehiculos()"
				class="search-input"
			/>
			<span class="search-icon">üîç</span>
			<button *ngIf="busquedaCedula" class="clear-btn" (click)="limpiarBusqueda()">‚úï</button>
		</div>
		<p class="search-results" *ngIf="busquedaCedula">
			Mostrando {{ vehiculosFiltrados.length }} de {{ vehiculos.length }} registros
		</p>
	</div>

	<table *ngIf="!loading && vehiculosFiltrados.length" class="records-table">
		<thead>
			<tr>
				<th>Nombre Completo</th>
				<th>Nombre del Grupo</th>
				<th>Documento</th>
				<th>Tel√©fono</th>
				<th>Email</th>
				<th>Tem√°tica</th>
				<th>Tipo Veh√≠culo</th>
				<th>Placa</th>
				<th>Fecha Registro</th>
				<th>Validado</th>
				<th>Fecha Validaci√≥n</th>
				<th>Validado Por</th>
				<th>Acciones</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let v of vehiculosFiltrados">
				<td>{{ v.nombreCompleto }}</td>
				<td>{{ v.nombreGrupo }}</td>
				<td>{{ v.documentoIdentificacion }}</td>
				<td>{{ v.telefono }}</td>
				<td>{{ v.email }}</td>
				<td>{{ v.tematica }}</td>
				<td>{{ v.tipoVehiculo }}</td>
				<td>{{ v.placa }}</td>
				<td>{{ v.fechaRegistro?.toDate?.() | date:'short' }}</td>
				<td>
					<span [style.color]="v.validado ? 'green' : 'red'">
						{{ v.validado ? '‚úì S√≠' : '‚úó No' }}
					</span>
				</td>
				<td>{{ v.validadoAt ? (v.validadoAt?.toDate?.() | date:'short') : '-' }}</td>
				<td>{{ v.validadoPor || '-' }}</td>
				<td>
					<button (click)="eliminar(v.id)">Eliminar</button>
				</td>
			</tr>
		</tbody>
	</table>

	<div *ngIf="!loading && !vehiculos.length" class="empty">No hay registros a√∫n.</div>
	<div *ngIf="!loading && vehiculos.length && !vehiculosFiltrados.length" class="empty">No se encontraron registros con ese n√∫mero de c√©dula.</div>
</div>
